<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration Form using Mutall Principles</title>
    <link rel="stylesheet" href="authoriser.css" />

    <script type="module">
      import { authoriser } from "./authoriser.js";
      //
      //After the page loads,create an instance of the auth class and show
      document.addEventListener("DOMContentLoaded", async () => {
        //
        //Create an instance of the auth class
        const iauth = new authoriser();
        //
        //Complete the (asyncronous) initialization of the authoriser sections
        await iauth.set_sections();
        //
        window.iauth = iauth;
      });
    </script>
  </head>
  <body>
    <form id="auth" data-field="choice">
      <fieldset id="login">
        <legend>
          <label class="radio">
            <input type="radio" name="choice" value="login" checked />
            Login
          </label>
        </legend>
        <label data-io_key="input">
          <span>User Name</span>
          <input name="name" type="text" />
          <span class="error"></span>
        </label>
        <label data-io_key="input">
          <span>Password</span>
          <input name="password" type="password" />
          <span class="error"></span>
        </label>
      </fieldset>
      <fieldset id="sign_up">
        <legend>
          <label class="radio">
            <input type="radio" name="choice" value="sign_up" />
            Sign up
          </label>
        </legend>
        <label data-io_key="input">
          <span>User Name</span>
          <input name="name" type="text" />
          <span class="error"></span>
        </label>
        <label data-io_key="input">
          <span>Email</span>
          <input name="email" type="email" />
          <span class="error"></span>
        </label>
        <label data-io_key="input">
          <span>Password</span>
          <input name="password" type="password" />
          <span class="error"></span>
        </label>
        <label data-io_key="input">
          <span>Confirm Password</span>
          <input name="confirm_password" type="password" />
          <span class="error"></span>
        </label>
      </fieldset>

      <fieldset id="forgot">
        <legend>
          <label class="radio">
            <input type="radio" name="choice" value="forgot" />
            Forgot Password
          </label>
        </legend>
        <label data-io_key="input">
          <span>User Name</span>
          <input name="name" type="text" />
          <span class="error"></span>
        </label>
        <label data-io_key="input">
          <span>Email</span>
          <input name="email" type="email" />
          <span class="error"></span>
        </label>
      </fieldset>
      <fieldset id="change">
        <legend>
          <label class="radio">
            <input type="radio" name="choice" value="change" />
            Change Password
          </label>
        </legend>
        <label data-io_key="input">
          <span>User Name</span>
          <input name="name" type="text" />
          <span class="error"></span>
        </label>
        <label data-io_key="input">
          <span>Old Password</span>
          <input name="old_password" type="password" />
          <span class="error"></span>
        </label>
        <label data-io_key="input">
          <span>New Password</span>
          <input name="new_password" type="password" />
          <span class="error"></span>
        </label>
        <label data-io_key="input">
          <span>Confirm Password</span>
          <input name="confirm_password" type="password" />
          <span class="error"></span>
        </label>
      </fieldset>

      <button type="submit" id="submit" onclick="iauth.authorise(event)">
        Submit
      </button>
    </form>
  </body>
</html>
