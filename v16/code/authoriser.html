<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Registration Form using Mutall Principles</title>
        <link rel="stylesheet" href="authoriser.css"/>
        <script type="module">
            // import {authoriser} from "./authoriser.js";
            import {fluctuate} from "./fluctuate.js";
            //
            //After the page loads,create an instance of the auth class and show 
            document.addEventListener("DOMContentLoaded", () => {
                //
                //Create an instance of the auth class
                // new authoriser();
                //
                window.fluctuate = fluctuate;
                // 
                // Get the form with the sections
                const form = document.getElementById('auth');
                //
                // Initialize fluctuate with the form as the parent(mother)
                // Fluctuate starts running immediately if you do this,
                // if you dont,the fluctuate starts running after delibarate selection of a section
                fluctuate.execute(form);

            });
            
        </script>
    </head>
    <body>
        <form id="auth" data-field="choice">
        
            <fieldset id="login">
                <legend>
                    <label class="radio">
                        <input type="radio" name="choice" value="login" checked onclick="fluctuate.onclick(this)"/>
                        Login
                    </label>
                </legend>

                <label data-io_key="input">
                    <span>User Name</span>
                    <input name="name" type="text" />
                    <span class="error"></span>
                </label>

                <label data-io_key="input">
                    <span>Password</span>
                    <input name="password"  type="password" />
                    <span class="error"></span>
                </label>
            </fieldset>

            <fieldset id="sign_up">
                <legend>
                    <label class="radio">
                        <input type="radio" name="choice" value="sign_up" onclick="fluctuate.onclick(this)"/>
                        Sign up
                    </label>
                </legend>
                <label data-io_key="input">
                    <span>User Name</span>
                    <input name="name" type="text"/>
                    <span class="error"></span>
                </label>
                <label data-io_key="input">
                    <span>Email</span>
                    <input name="email" type="email"/>
                    <span  class="error"></span>
                </label>
                <label data-io_key="input">
                    <span>Password</span>
                    <input name="password" type="password" />
                    <span class="error"></span>
                </label>
                <label data-io_key="input">
                    <span>Confirm Password</span>
                    <input name="confirm_password" type="password" />
                    <span class="error"></span>
                </label>
            </fieldset>

            <fieldset id="forgot">
                <legend>
                    <label class="radio">
                        <input type="radio" name="choice" value="forgot" onclick="fluctuate.onclick(this)"/>
                        Forgot Password
                    </label>
                </legend>
                <label data-io_key="input">
                <span>User Name</span>
                    <input name="name" type="text" />
                    <span class="error"></span>
                </label>
                <label data-io_key="input">
                    <span>Email</span>
                    <input name="email" type="email" />
                    <span class="error"></span>
                </label>
            </fieldset>
            <fieldset id="change">
                <legend>
                    <label class="radio">
                        <input type="radio" name="choice" value="change" onclick="fluctuate.onclick(this)"/>
                        Change Password
                    </label>
                </legend>
                <label data-io_key="input">
                <span>User Name</span>
                    <input name="name" type="text" />
                    <span class="error"></span>
                </label>
                <label data-io_key="input">
                    <span>Old Password</span>
                    <input name="old_password" type="password" />
                    <span class="error"></span>
                </label>
                <label data-io_key="input">
                    <span>New Password</span>
                    <input name="new_password" type="password" />
                    <span class="error"></span>
                </label>
                <label data-io_key="input">
                    <span>Confirm Password</span>
                    <input name="confirm_password" type="password" />
                    <span class="error"></span>
                </label>
            </fieldset>
            
            <button type="submit" id="submit"
                onclick="iauth.authorise(event)">Submit
                </button>
        </form>
    </body>
</html>